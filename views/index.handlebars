<div class="container">
  <form action="/records" method="GET">
    <div class="row">
      <div class="form-group col-md-3">
        <label for="selectMonth">月份</label>
        <select id="selectMonth" class="form-control">
          {{!-- 要自動帶入最新的月份並且default選現在的月份 --}}
          {{#each months}}
          <option>{{this}}</option>
          {{/each}}
        </select>
      </div>

      <div class="form-group col-md-3">
        <label for="selectCategory">支出類別</label>
        <select id="selectselectCategory" class="form-control">
          <option>全部</option>
          <option>家居物業</option><i class="fas fa-home"></i>
          <option>交通出行 <i class="fas fa-shuttle-van"></i></option>
          <option>休閒娛樂 <i class="fas fa-grin-beam"></i></option>
          <option>餐飲食品 <i class="fas fa-utensils"></i></option>
          <option>其他 <i class="fas fa-pen"></i></option>
        </select>
      </div>
      <div class="submit form-group">
        <button type="submit" class="btn btn-primary">確認</button>
      </div>
    </div>
  </form>
  <div class="row">
    <span class="col-md-2">總金額:</span>
    <h1 class="text-warning col-md-4 text-center">{{totalAmount}}</h2>
      <form action="/records/new" method="GET" class="col-md-2">
        <button type="submit" class="btn btn-success">新增支出</button>
      </form>
  </div>
  <div class="col-md-8 table-responsive table-content">
    <table class="table table-striped">
      <thead>
        <tr class="bg-primary text-white" style="font-size: 20px">
          <th scope="col">支出類別</th>
          <th scope="col">支出名稱</th>
          <th scope="col">日期</th>
          <th scope="col">金額</th>
          <th scope="col"></th>
          <th scope="col"></th>
          <th scope="col"></th>
        </tr>
      </thead>
      <tbody>
        {{#each records}}
        <tr>
          <td>{{{categoryIcon this.category}}}</td>
          <td>{{this.name}}</td>
          <td>{{{dateFormat this.date}}}</td>
          <td>{{this.amount}}</td>
          <td>
            <form action="/records/{{this.id}}/edit" method="GET">
              <button class="submit btn btn-outline-success">編輯</button>
            </form>
          </td>
          <td>
            <form action="/records/{{this.id}}/copy" method="GET">
              <button class="submit btn btn-outline-warning">複製</button>
            </form>
          </td>
          <td>
            <button type="button" class="btn btn-outline-danger" data-toggle="modal"
              data-target="#delete-button-{{this.id}}">刪除</button>
          </td>
          <!-- Modal for delete confirmation-->
          <div class="modal fade" id="delete-button-{{this.id}}" tabindex="-1" role="dialog"
            aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLabel">要刪除 {{{dateFormat this.date}}} {{this.name}}?</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                  確定要刪除嗎?
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">取消</button>
                  <form action="/records/{{this.id}}/delete?_method=DELETE" method="POST" style="display: inline;">
                    <button type="submit" class=" btn btn-danger btn-sm">Delete</button>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </tr>

        {{/each}}
      </tbody>
    </table>
  </div>

</div>